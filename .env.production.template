# Production Environment Configuration
# Profile: production - Optimized for reliability, performance, and security

# ===== PROFILE SELECTION =====
MLOPS_PROFILE=production

# ===== REQUIRED SETTINGS =====

# Application Configuration
MLOPS_APP_NAME=ML Model Serving API
MLOPS_APP_VERSION=1.0.0

# Server Configuration
MLOPS_HOST=0.0.0.0
MLOPS_PORT=8000
MLOPS_WORKERS=4

# ===== SECURITY SETTINGS (REQUIRED) =====

# API Key (REQUIRED - set via secret manager)
MLOPS_API_KEY=${PROD_API_KEY}

# CORS Settings (strict whitelist)
MLOPS_ALLOWED_ORIGINS=https://api.example.com,https://app.example.com
MLOPS_CORS_ORIGINS=https://app.example.com

# Request Timeout
MLOPS_MAX_REQUEST_TIMEOUT=30

# ===== EXTERNAL SERVICES (ALL ENABLED) =====

# Redis Configuration (REQUIRED in production)
MLOPS_REDIS_ENABLED=true
MLOPS_REDIS_HOST=${PROD_REDIS_HOST}
MLOPS_REDIS_PORT=6379
MLOPS_REDIS_DB=0
MLOPS_REDIS_PASSWORD=${PROD_REDIS_PASSWORD}
MLOPS_REDIS_MAX_CONNECTIONS=100
MLOPS_REDIS_PREDICTION_CACHE_TTL=7200
MLOPS_REDIS_FEATURE_CACHE_TTL=3600

# Kafka Configuration (REQUIRED in production)
MLOPS_KAFKA_ENABLED=true
MLOPS_KAFKA_BOOTSTRAP_SERVERS=${PROD_KAFKA_BOOTSTRAP_SERVERS}
MLOPS_KAFKA_CONSUMER_GROUP=kubesentiment_prod
MLOPS_KAFKA_TOPIC=sentiment_requests
MLOPS_KAFKA_CONSUMER_THREADS=8
MLOPS_KAFKA_BATCH_SIZE=200
MLOPS_KAFKA_MAX_POLL_RECORDS=1000

# Vault Configuration (REQUIRED in production)
MLOPS_VAULT_ENABLED=true
MLOPS_VAULT_ADDR=${PROD_VAULT_ADDR}
MLOPS_VAULT_ROLE=kubesentiment-production
MLOPS_VAULT_NAMESPACE=production
MLOPS_VAULT_MOUNT_POINT=secret
MLOPS_VAULT_SECRETS_PATH=kubesentiment/production

# Data Lake Configuration (REQUIRED in production)
MLOPS_DATA_LAKE_ENABLED=true
MLOPS_DATA_LAKE_S3_BUCKET=${PROD_DATA_LAKE_BUCKET}
MLOPS_DATA_LAKE_S3_PREFIX=predictions/
MLOPS_DATA_LAKE_BATCH_SIZE=1000
MLOPS_DATA_LAKE_FLUSH_INTERVAL=300

# ===== MLOPS FEATURES (ALL ENABLED) =====

# MLflow Tracking
MLOPS_MLFLOW_ENABLED=true
MLOPS_MLFLOW_TRACKING_URI=${PROD_MLFLOW_TRACKING_URI}
MLOPS_MLFLOW_EXPERIMENT_NAME=sentiment_analysis_production
MLOPS_MLFLOW_S3_BUCKET=${PROD_MLFLOW_S3_BUCKET}
MLOPS_MLFLOW_REGISTRY_URI=${PROD_MLFLOW_REGISTRY_URI}

# Model Drift Detection
MLOPS_DRIFT_DETECTION_ENABLED=true
MLOPS_DRIFT_CHECK_INTERVAL=3600
MLOPS_DRIFT_THRESHOLD=0.1

# Explainability
MLOPS_EXPLAINABILITY_ENABLED=true

# ===== MODEL CONFIGURATION =====

# Model Selection
MLOPS_MODEL_NAME=distilbert-base-uncased-finetuned-sst-2-english
MLOPS_ALLOWED_MODELS=distilbert-base-uncased-finetuned-sst-2-english

# Model Optimization (use ONNX in production)
MLOPS_ONNX_MODEL_PATH=/app/models/production/model.onnx

# Text Processing
MLOPS_MAX_TEXT_LENGTH=512

# Feature Engineering
MLOPS_ENABLE_FEATURE_ENGINEERING=true

# ===== PERFORMANCE TUNING =====

# Async Batch Processing
MLOPS_ASYNC_BATCH_ENABLED=true
MLOPS_ASYNC_BATCH_SIZE=100
MLOPS_ASYNC_BATCH_TIMEOUT=2.0
MLOPS_ASYNC_MAX_WORKERS=10

# Anomaly Buffer
MLOPS_ANOMALY_BUFFER_ENABLED=true
MLOPS_ANOMALY_BUFFER_MAX_SIZE=10000
MLOPS_ANOMALY_BUFFER_DEFAULT_TTL=3600

# Caching (large cache for production)
MLOPS_PREDICTION_CACHE_MAX_SIZE=10000

# ===== MONITORING & OBSERVABILITY =====

# Logging (less verbose in production)
MLOPS_LOG_LEVEL=WARNING
MLOPS_ENABLE_METRICS=true

# Distributed Tracing (OTLP in production)
MLOPS_ENABLE_TRACING=true
MLOPS_TRACING_BACKEND=otlp
MLOPS_OTLP_ENDPOINT=${PROD_OTLP_ENDPOINT}
MLOPS_SERVICE_NAME=kubesentiment-production

# Metrics
MLOPS_METRICS_CACHE_TTL=300

# Excluded URLs from tracing
MLOPS_TRACING_EXCLUDED_URLS=/health,/metrics,/health/details

# ===== CLOUD PROVIDER CONFIGURATION =====

# AWS Configuration (if using AWS)
# AWS_ACCESS_KEY_ID=${PROD_AWS_ACCESS_KEY_ID}
# AWS_SECRET_ACCESS_KEY=${PROD_AWS_SECRET_ACCESS_KEY}
# AWS_REGION=us-east-1
# AWS_S3_ENDPOINT_URL=https://s3.us-east-1.amazonaws.com

# GCP Configuration (if using GCP)
# GOOGLE_APPLICATION_CREDENTIALS=/secrets/production-credentials.json
# GCP_PROJECT_ID=${PROD_GCP_PROJECT_ID}

# Azure Configuration (if using Azure)
# AZURE_STORAGE_CONNECTION_STRING=${PROD_AZURE_STORAGE_CONNECTION_STRING}
# AZURE_STORAGE_ACCOUNT=${PROD_AZURE_STORAGE_ACCOUNT}

# ===== ALERTING & NOTIFICATIONS =====

# Slack Notifications (optional)
# SLACK_WEBHOOK_URL=${PROD_SLACK_WEBHOOK_URL}
# SLACK_CHANNEL=#production-alerts

# PagerDuty (optional)
# PAGERDUTY_SERVICE_KEY=${PROD_PAGERDUTY_SERVICE_KEY}

# ===== HIGH AVAILABILITY & RESILIENCE =====

# Connection Pooling
MLOPS_REDIS_NAMESPACE=kubesentiment_prod

# Request Queue
# MLOPS_MAX_CONCURRENT_REQUESTS=100
# MLOPS_REQUEST_QUEUE_SIZE=1000

# ===== SECURITY NOTES =====
# IMPORTANT:
# - Never commit this file with real credentials
# - Use a secret manager (Vault, AWS Secrets Manager, etc.)
# - Rotate credentials regularly
# - Use encrypted secrets in Kubernetes
# - Enable audit logging
# - Review security policies regularly

# ===== PROFILE DEFAULTS (REFERENCE ONLY) =====
# The production profile automatically sets:
# - MLOPS_DEBUG=false
# - MLOPS_ENVIRONMENT=production
# - All external services enabled
# - Large caching (10000 items)
# - WARNING level logging
# - Optimized performance settings
#
# See app/core/config/profiles.py for complete defaults
