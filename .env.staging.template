# Staging Environment Configuration
# Profile: staging - Pre-production testing environment

# ===== PROFILE SELECTION =====
MLOPS_PROFILE=staging

# ===== REQUIRED SETTINGS =====

# Application Configuration
MLOPS_APP_NAME=ML Model Serving API
MLOPS_APP_VERSION=1.0.0-staging

# Server Configuration
MLOPS_HOST=0.0.0.0
MLOPS_PORT=8000
MLOPS_WORKERS=2

# ===== SECURITY SETTINGS (REQUIRED) =====

# API Key (REQUIRED in staging)
MLOPS_API_KEY=${STAGING_API_KEY}

# CORS Settings (restrictive)
MLOPS_ALLOWED_ORIGINS=https://staging.example.com,https://staging-app.example.com
MLOPS_CORS_ORIGINS=https://staging.example.com

# ===== EXTERNAL SERVICES =====

# Redis Configuration (ENABLED by default in staging)
MLOPS_REDIS_ENABLED=true
MLOPS_REDIS_HOST=redis-staging.example.com
MLOPS_REDIS_PORT=6379
MLOPS_REDIS_DB=0
MLOPS_REDIS_PASSWORD=${STAGING_REDIS_PASSWORD}

# Kafka Configuration (optional in staging)
MLOPS_KAFKA_ENABLED=false
# MLOPS_KAFKA_BOOTSTRAP_SERVERS=kafka-staging.example.com:9092
# MLOPS_KAFKA_CONSUMER_GROUP=kubesentiment_staging
# MLOPS_KAFKA_TOPIC=sentiment_requests_staging

# Vault Configuration (ENABLED in staging)
MLOPS_VAULT_ENABLED=true
MLOPS_VAULT_ADDR=https://vault-staging.example.com
MLOPS_VAULT_ROLE=kubesentiment-staging
MLOPS_VAULT_NAMESPACE=staging
MLOPS_VAULT_MOUNT_POINT=secret
MLOPS_VAULT_SECRETS_PATH=kubesentiment/staging

# Data Lake (optional in staging)
MLOPS_DATA_LAKE_ENABLED=false

# ===== MLOPS FEATURES =====

# MLflow Tracking (ENABLED in staging)
MLOPS_MLFLOW_ENABLED=true
MLOPS_MLFLOW_TRACKING_URI=https://mlflow-staging.example.com
MLOPS_MLFLOW_EXPERIMENT_NAME=sentiment_analysis_staging
MLOPS_MLFLOW_S3_BUCKET=${STAGING_MLFLOW_S3_BUCKET}

# Model Drift Detection (ENABLED in staging)
MLOPS_DRIFT_DETECTION_ENABLED=true
MLOPS_DRIFT_CHECK_INTERVAL=3600

# Explainability (ENABLED in staging)
MLOPS_EXPLAINABILITY_ENABLED=true

# ===== MODEL CONFIGURATION =====

# Model Selection
MLOPS_MODEL_NAME=distilbert-base-uncased-finetuned-sst-2-english
MLOPS_ALLOWED_MODELS=distilbert-base-uncased-finetuned-sst-2-english

# Model Optimization
MLOPS_ONNX_MODEL_PATH=/app/models/optimized/model.onnx

# Text Processing
MLOPS_MAX_TEXT_LENGTH=512

# Feature Engineering
MLOPS_ENABLE_FEATURE_ENGINEERING=true

# ===== PERFORMANCE TUNING =====

# Async Batch Processing (ENABLED in staging)
MLOPS_ASYNC_BATCH_ENABLED=true
MLOPS_ASYNC_BATCH_SIZE=50
MLOPS_ASYNC_BATCH_TIMEOUT=5.0
MLOPS_ASYNC_MAX_WORKERS=4

# Anomaly Buffer (ENABLED in staging)
MLOPS_ANOMALY_BUFFER_ENABLED=true
MLOPS_ANOMALY_BUFFER_MAX_SIZE=5000

# Caching
MLOPS_PREDICTION_CACHE_MAX_SIZE=1000

# ===== MONITORING & OBSERVABILITY =====

# Logging
MLOPS_LOG_LEVEL=INFO
MLOPS_ENABLE_METRICS=true

# Distributed Tracing (ENABLED in staging)
MLOPS_ENABLE_TRACING=true
MLOPS_TRACING_BACKEND=jaeger
MLOPS_JAEGER_AGENT_HOST=jaeger-agent-staging.example.com
MLOPS_JAEGER_AGENT_PORT=6831
MLOPS_SERVICE_NAME=kubesentiment-staging

# Metrics
MLOPS_METRICS_CACHE_TTL=300

# ===== CLOUD PROVIDER SECRETS =====
# Set these via your CI/CD pipeline or secret manager

# AWS Credentials (if using AWS services)
# AWS_ACCESS_KEY_ID=${STAGING_AWS_ACCESS_KEY_ID}
# AWS_SECRET_ACCESS_KEY=${STAGING_AWS_SECRET_ACCESS_KEY}
# AWS_REGION=us-east-1

# GCP Credentials (if using GCP services)
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/staging-credentials.json

# ===== PROFILE DEFAULTS (REFERENCE ONLY) =====
# The staging profile automatically sets:
# - MLOPS_DEBUG=false
# - MLOPS_ENVIRONMENT=staging
# - Redis, Vault, MLOps features enabled
# - Moderate caching (1000 items)
# - INFO level logging
#
# See app/core/config/profiles.py for complete defaults
